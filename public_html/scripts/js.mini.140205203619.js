/* 2014-02-05 20:36:19 | Removed 38588 bytes | Compressed 22.9% */
var Ajax=(function(){var xhr,get=function(url,parameters,successCallback,errorCallback){if(parameters&&Object.keys(parameters).length>0){url=url+"?"+obj2querystring(parameters);}
xhr=new XMLHttpRequest();xhr.open("get",url,true);xhr.onload=function(e){if(e.target.status===200){if(successCallback)successCallback(e.target);}else{if(errorCallback)errorCallback(e.target);}}
xhr.send();},getJSON=function(url,parameters,successCallback,errorCallback){if(parameters&&Object.keys(parameters).length>0){url=url+"?"+obj2querystring(parameters);}
xhr=new XMLHttpRequest();xhr.responseType='json';xhr.open("get",url,true);xhr.onload=function(e){if(e.target.status===200){if(successCallback)successCallback(e.target.response);}else{if(errorCallback)errorCallback(e.target);}}
xhr.send();},post=function(url,parameters,successCallback,errorCallback){var sendData;if(parameters&&Object.keys(parameters).length>0){sendData=obj2querystring(parameters);}
xhr=new XMLHttpRequest();xhr.open("post",url,true);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.onload=function(e){if(e.target.status===200){if(successCallback)successCallback(e.target);}else{if(errorCallback)errorCallback(e.target);}}
xhr.send(sendData);},postForm=function(url,form,successCallback,errorCallback){var formData=new FormData(form);var xhr=new XMLHttpRequest();xhr.open("post",url,true);xhr.onload=function(e){if(e.target.status===200){if(successCallback)successCallback(e.target);}else{if(errorCallback)errorCallback(e.target);}};xhr.send(formData);},obj2querystring=function(obj){var parts=[];for(var i in obj){if(obj.hasOwnProperty(i)){parts.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));}}
return parts.join("&");};return{get:get,getJSON:getJSON,post:post,postForm:postForm};})();var FileList=(function(){var projectId,activeFile;var files;var fileList,rightClickMenu;var openedFolders=[];var init=function(){rightClickMenu=document.getElementById("fileListRightClickMenu");rightClickMenu.addEventListener("click",rightClickClickHandler,false);fileList=document.getElementById("fileList");fileList.addEventListener("drop",dropFile,false);fileList.addEventListener("dragover",hoverFile,false);fileList.addEventListener("dragleave",hoverFile,false);fileList.addEventListener("dragstart",dragFile,false);fileList.addEventListener("contextmenu",clickHandler,false);fileList.addEventListener("click",clickHandler,false);};var setProjectId=function(newProjectId){if(!fileList)init();projectId=newProjectId;console.debug("FileList: ProjectId set to "+newProjectId);loadProjectFiles();};var setActiveFile=function(newActiveFile){console.debug("FileList: ActiveFile set to "+newActiveFile);activeFile=newActiveFile;selectActiveFile();};var loadProjectFiles=function(){Ajax.getJSON("/scripts/build_file_tree.php",{project_id:projectId},function(items){files={};fileList.innerHTML=printFolder(items,"");console.log("File list loaded");for(var i=0;i<openedFolders.length;i++){var li=fileList.querySelector("li[data-uri='"+openedFolders[i]+"']");if(li){openFolder(li);}}
if(activeFile)selectActiveFile();},function(e){console.error("Error loading file tree",e);});};var printFolder=function(arr,path){var htm=[];htm.push("<ul>");for(var i=0;i<arr.length;i++){var item=arr[i];var imagePreview="";if(item.type=="jpg"||item.type=="jpeg"||item.type=="gif"||item.type=="png"||item.type=="bmp"||item.type=="tif"||item.type=="tiff"){imagePreview=" imagePreview";}
var uri=item.path+item.filename;files[uri]=item;var changed="";if(xioDocs.hasOwnProperty(projectId)&&xioDocs[projectId].hasOwnProperty(uri)&&!xioDocs[projectId][uri].isClean()){changed=" changed ";}
var hidden=(item.filename=='xiocode.properties')?' hidden':'';var title=item.size?toHumanReadableFileSize(item.size,true):(item.leafs?item.leafs.length+" items":"empty");htm.push("<li draggable='true' class='"+imagePreview+changed+hidden+"' data-uri='"+uri+"' data-type='"+item.type+"' data-mime='"+item.mime+"' title='"+title+"'>");htm.push("<span class='fileIcon "+item.type+"'></span>");htm.push("<span class='fileName'>"+item.filename+"</span>");if(item.leafs){htm.push(printFolder(item.leafs,item.path));}
htm.push("</li>");}
htm.push("</ul>");return htm.join("");}
var selectActiveFile=function(){if(!activeFile)return;if(!files){console.log("Can not select",activeFile,"in fileList. Files not loaded");return;}
var items=fileList.querySelectorAll("li");for(var i=0;i<items.length;i++){items[i].classList.remove("selected");}
if(activeFile===UNSAVED_FILENAME)return;console.log("Select: '"+activeFile+"' in fileList");var li=fileList.querySelector("li[data-uri='"+activeFile+"']");if(li){li.classList.add("selected");var parent=li.parentElement;while(parent!=fileList){if(parent.nodeName==="LI"){openFolder(parent);}
parent=parent.parentElement;}}};var clear=function(){if(!fileList)init();files=null;fileList.innerHTML="Loading...";};var clickHandler=function(e){var target=e.target;while(target.nodeName!=="LI"&&target!==fileList){target=target.parentElement;}
hideFileListRightClickMenu();if(e.button===0){if(target!==fileList){var uri=target.dataset.uri;var file=files[uri];console.log("Clicked on item",file);if(uri===activeFile){console.log("Already open");e.preventDefault();}else if(file.type==='folder'){toggleFolder(target);}else if(['jpg','png','pdf','gif','bmp'].indexOf(file.type)!=-1){console.log("Open in new tab");window.open(projectsURL+projectId+"/"+uri);}else{console.log("Mime type text/* -> open in textarea");openFile(uri);}
e.stopPropagation();}}else if(e.button===2){if(e.ctrlKey||e.altKey)return true;if(target===fileList){showRootRightClickMenu("",e);}else{var uri=target.dataset.uri;target.classList.add("rightClicked");showFileListRightClickMenu(uri,e);}
e.preventDefault();}};function toggleFolder(li){var folderIcon=li.querySelector("span.fileIcon");if(folderIcon.classList.contains("open")){closeFolder(li);}else{openFolder(li);}}
function openFolder(li){console.log("Open folder",li);var uri=li.dataset.uri;var index=openedFolders.indexOf(uri);if(index===-1){openedFolders.push(uri);}
var folderIcon=li.querySelector("span.fileIcon");var folderList=li.querySelector("ul");folderIcon.classList.add("open");folderList.style.display="block";}
function closeFolder(li){console.log("Close folder",li);var uri=li.dataset.uri;var index=openedFolders.indexOf(uri);if(index>-1){openedFolders.splice(index,1);}
var folderIcon=li.querySelector("span.fileIcon");var folderList=li.querySelector("ul");folderIcon.classList.remove("open");folderList.style.display="none";}
var showSpinner=function(uri){var li=fileList.querySelector("li[data-uri='"+uri+"']");if(li){var img=document.createElement("img");img.src="/images/ajax-loader.gif";img.classList.add("spinner");li.appendChild(img);}};var hideSpinner=function(uri){var spinner=fileList.querySelector("li[data-uri='"+uri+"'] img");if(spinner)spinner.parentElement.removeChild(spinner);};var setFileAsClean=function(uri){var li=fileList.querySelector("li[data-uri='"+uri+"']");if(li)li.classList.remove("changed");};var setFileAsDirty=function(uri){var li=fileList.querySelector("li[data-uri='"+uri+"']");if(li)li.classList.add("changed");};function uploadFiles(filesToUpload,folder,overwrite){console.log("start upload:",filesToUpload,"to",folder);var uploadData=new FormData();uploadData.append('path',folder);uploadData.append('project_id',activeProject.id);var fileUploadCount=0;var xhr;for(var i=0;i<filesToUpload.length;++i){var file=filesToUpload[i];var checkData=new FormData();checkData.append('file',folder+file.name);checkData.append('project_id',activeProject.id);xhr=new XMLHttpRequest();xhr.open('POST',"/scripts/check_collision.php",false);xhr.send(checkData);if(xhr.status===409){if(!confirm(xhr.responseText+", Do you want to overwrite the file?")){continue;}}else if(xhr.status!==202){continue;}
uploadData.append(file.name,file);fileUploadCount++;}
if(fileUploadCount>0){xhr=new XMLHttpRequest();xhr.open('POST',"/scripts/file_upload.php",true);xhr.onload=function(e){if(xhr.status==200){FileList.loadProjectFiles();}else{console.log("Error uploading file:");console.log(filesToUpload);}};xhr.upload.onprogress=function(e){};xhr.send(uploadData);}}
var dragFile=function(e){console.log("Drag start",e);var target=e.target;while(target.nodeName!=="LI"){target=target.parentElement;if(target===fileList)return;}
var uri=target.dataset.uri;var file=files[uri];var mime="css/text";var filePath=location.origin+"/scripts/load_file.php?project_id="+projectId+"&uri="+encodeURI(uri);var fileDetails=mime+":"+file.filename+":"+filePath;console.log("fileDetails",fileDetails,e);e.dataTransfer.setData("DownloadURL",fileDetails);e.dataTransfer.setData("uri",uri);e.stopPropagation();};var dropFile=function(e){hoverFile(e);console.log("drop in fileList",e);var target=e.target;while(target!==fileList){if(target.nodeName==="LI"&&target.dataset.type==="folder")break;target=target.parentElement;}
if(target===fileList){var folder="";}else{var folder=target.dataset.uri+"/";}
var fileDragged=e.dataTransfer.getData("uri");if(fileDragged){if(folder+files[fileDragged].filename===fileDragged){console.log("drop to same place, abort");}else{Ajax.get("/scripts/move_file.php",{'project_id':projectId,'uri':encodeURI(fileDragged),'toFolder':encodeURI(folder)},function(e){FileList.loadProjectFiles();});}}else{var filesToUpload=e.target.files||e.dataTransfer.files;console.log("upload files:",filesToUpload);if(filesToUpload.length>0){uploadFiles(filesToUpload,folder,false);return;}}};var hoverFile=function(e){e.stopPropagation();e.preventDefault();var target=e.target;while(target!==fileList){if(target.nodeName==="LI"&&target.dataset.type==="folder")break;target=target.parentElement;}
if(e.type=="dragover"){target.classList.add("dropTo");}else{target.classList.remove("dropTo");}};var rightClickClickHandler=function(e){var target=e.target;var uri=rightClickMenu.dataset.uri;var path=(uri)?files[uri].path:"";var filename=(uri)?files[uri].filename:"";switch(target.dataset.do){case"newFolder":var folderName=prompt("Enter the name of the folder");if(folderName){if(uri&&files[uri].type=='folder')path+=filename+"/";Ajax.get("/scripts/create_folder.php",{'project_id':projectId,'uri':encodeURI(path+folderName)},function(){FileList.loadProjectFiles();});}
break;case"newFile":var newFileName=prompt("Enter the filename");if(newFileName){if(uri&&files[uri].type=='folder')path+=filename+"/";Ajax.post("/scripts/save.php",{'project_id':activeProject.id,'uri':encodeURI(path+newFileName)},function(){FileList.loadProjectFiles();openFile(path+newFileName);});}
break;case"refresh":FileList.loadProjectFiles();break;case"delete":var answer;if(files[uri].type=='folder'){answer=confirm("Are you sure you want to delete the folder and all its content?\n"+uri+"?");if(answer){Ajax.get("/scripts/delete_folder.php",{'project_id':activeProject.id,'uri':encodeURI(uri)},function(){FileList.loadProjectFiles();});}}else{answer=confirm("Are you sure you want to delete the file: '"+uri+"'?");if(answer){Ajax.get("/scripts/delete_file.php",{'project_id':activeProject.id,'uri':encodeURI(uri)},function(){FileList.loadProjectFiles();});}}
break;case"rename":var new_name=prompt("Enter the new name of the file/folder",filename);if(new_name){Ajax.get("/scripts/rename.php",{'project_id':activeProject.id,'from':encodeURI(uri),'to':encodeURI(path+new_name)},function(){if(activeFile==uri)activeFile=path+new_name;console.log(uri,"renamed to",path+new_name);FileList.loadProjectFiles();});}
break;case"upload":XioPop.alert("upload file...","not implemented yet ");break;}
hideFileListRightClickMenu();};function showFileListRightClickMenu(uri,e){rightClickMenu.classList.remove("hidden");var top=e.pageY;if(top+rightClickMenu.offsetHeight+10>window.innerHeight){top=window.innerHeight-rightClickMenu.offsetHeight-10;}
rightClickMenu.dataset.uri=uri;rightClickMenu.style.top=top+"px";rightClickMenu.style.left=e.pageX+"px";}
function showRootRightClickMenu(uri,e){showFileListRightClickMenu(uri,e);rightClickMenu.classList.add("root");}
function hideFileListRightClickMenu(){rightClickMenu.classList.add("hidden");rightClickMenu.classList.remove("root");var elements=fileList.getElementsByClassName("rightClicked");for(var i=0;i<elements.length;i++){elements[i].classList.remove("rightClicked");}}
var getFiles=function(){return files;}
return{loadProjectFiles:loadProjectFiles,setProjectId:setProjectId,setActiveFile:setActiveFile,clear:clear,showSpinner:showSpinner,hideSpinner:hideSpinner,getFiles:getFiles,setFileAsClean:setFileAsClean,setFileAsDirty:setFileAsDirty}})();"use strict";var fileListWidth=220;var DEBUG_MODE_ON=true;var ACCESS_CHECK_INTERVAL=5*60*1000;var KEY_ENTER=13;var UNSAVED_FILENAME="untitled";if(!DEBUG_MODE_ON){console=console||{};console.log=function(){};}
var activeProject;var activeFile;var checkAccessInterval;var pageTitle;var title;var hoverTimer;var fileToBeLoaded;var oldHash;var loginBox,loginForm,loginButton;var username;var h1,toolbar,userMenu;function init(){pageTitle=document.title;title=document.getElementById("pageTitle");console.log("Init "+pageTitle);username=document.getElementById("username");loginBox=document.getElementById("login");loginForm=document.getElementById("loginForm");loginButton=document.getElementById("btnLogin");loginForm.addEventListener("submit",loginRequest,false);window.onresize=fixLayout;window.onhashchange=readHash;window.onbeforeunload=warnBeforeUnload;window.addEventListener("userLogin",loginAccepted,false);document.addEventListener("DOMContentLoaded",startup,false);h1=document.querySelector("#header h1");h1.addEventListener("click",function(){setHash()},false);toolbar=document.getElementById("toolbar");toolbar.addEventListener("click",toolbarHandler,false);userMenu=document.getElementById("userMenu");userMenu.addEventListener("click",userMenuHandler,false);}
function startup(){if(_USER&&_USER.username){window.dispatchEvent(new CustomEvent("userLogin"));}}
function warnBeforeUnload(e){var n=numberOfUnsavedFiles();if(n>0){return"You have "+n+" unsaved files. Are you sure you want to navigate away from this page";}}
function numberOfUnsavedFiles(){var counter=0;if(activeProject){for(var uri in xioDocs[activeProject.id]){if(!xioDocs[activeProject.id][uri].isClean()){counter++;}}}
return counter;}
function loginRequest(e){e.preventDefault();if(!loginForm.elements.code_username.value||!loginForm.elements.code_password.value){return;}
loginButton.disabled=true;loginButton.textContent="Authorizing...";var xhr=new XMLHttpRequest();xhr.open("post","/scripts/gatekeeper_login.php",true);xhr.onload=loginCallback;xhr.send(new FormData(loginForm));}
function loginCallback(e){var user=JSON.parse(e.target.responseText);if(e.target.status===200&&user&&user.username){_USER=user;var userLogin=new CustomEvent("userLogin");window.dispatchEvent(userLogin);}
else{console.warn("Incorrect login or password");loginBox.className="";setTimeout(function(){loginBox.classList.add("shake");},1);}
loginForm.reset();loginButton.disabled=false;loginButton.textContent="Login";loginForm.elements.code_username.focus();}
function loginAccepted(e){console.log("Login accepted",e);console.log(_USER);document.body.classList.add("authorized");username.textContent=_USER.username;checkAccessInterval=setInterval(checkAccess,ACCESS_CHECK_INTERVAL);initWriter();ProjectList.loadProjects();}
function logout(){document.body.classList.remove("authorized");ProjectList.clear();FileList.clear();openedList.innerHTML="";var doc=CodeMirror.Doc("");var old=codeMirror.swapDoc(doc);activeProject=null;activeFile=null;xioDocs={};loginForm.elements.code_username.focus();clearInterval(checkAccessInterval);var xhr=new XMLHttpRequest();xhr.open("get","/scripts/gatekeeper_logout.php",true);xhr.send();}
function checkAccess(){console.log(new Date().toTimeString().substr(0,5),"Access check");var xhr=new XMLHttpRequest();xhr.open("GET","/scripts/gatekeeper_check_access.php");xhr.onload=function(e){if(xhr.status!==202){logout();}};xhr.send();}
function openProjectConfig(projectId){XioPop.load("/scripts/project_config.php?project_id="+projectId,function(e){var frmProjectConfig=document.getElementById("frmProjectConfig");frmProjectConfig.addEventListener("submit",function(e){e.preventDefault();console.log("Save project configurations...");Ajax.postForm("/scripts/project_config.php?do=save",frmProjectConfig,function(xhr){console.log("Project configurations saved!");XioPop.close();ProjectList.loadProjects();},function(e){console.err("Error saving config",e);});},false);var btnConfigCancel=document.getElementById("btnConfigCancel");btnConfigCancel.addEventListener("click",function(e){XioPop.close();},false);});}
function toolbarHandler(e){if(e.button!==0)return false;var button=e.target;if(button.classList.contains("disabled"))return;switch(button.id){case"btnNew":createNewFile();break;case"btnSave":if(activeFile===UNSAVED_FILENAME){console.log("Save As...  ");XioPop.prompt("Save file as...","Enter the filename","",function(answer){if(answer){saveFileAs(answer);}});}else if(activeFile){saveFile();}
break;case"btnPreviewFile":var path=projectsURL+activeProject.id+"/"+activeFile;console.log("Preview:",projectsURL+activeProject.id+"/"+activeFile);window.open(path,'code_file_preview');break;case"btnPreviewProject":var url=activeProject.run_url;if(!url){url=projectsURL+activeProject.id+"/";}
window.open(url,activeProject.id+'_preview');break;case"btnProjectConfig":openProjectConfig(activeProject.id);break;case"btnExportZip":window.location="/scripts/export_zip.php?path="+activeProject.id+"/";break;default:console.warn("Unknown button clicked");}}
function userMenuHandler(e){if(e.button!==0)return false;var target=e.target;while(target.nodeName!=="LI"){if(target==userMenu)return;target=target.parentElement;}
switch(target.id){case"btnLogout":logout();break;case"btnExportAllZip":var d=new Date();window.location="/scripts/export_zip.php?path="+"&filename=Projects_"+d.toISOString().substring(0,10)+'.zip';break;case"btnChangePassword":XioPop.prompt("Change password","Enter your new password","",function(newPass){if(newPass){var formData=new FormData();formData.append("newPass",newPass);var xhr=new XMLHttpRequest();xhr.open('POST',"/scripts/change_password.php",true);xhr.onload=function(e){var xhr=e.target;if(xhr.status===200){console.log("Sparat");XioPop.close();}else{console.err("Error changing password",xhr);}};xhr.send(formData);}});break;}}
function fixLayout(){var height=document.getElementById("fileList").offsetHeight;codeMirror.setSize(null,height-2);}
function openProject(id){if(!ProjectList.isLoaded()){console.log("No projects loaded yet");return false;}
var project=ProjectList.getProject(id);if(!project){console.log("project id not found, return to base...");setHash();return;}
activeProject=project;activeProject.id=id;document.title=pageTitle+" - "+project.name;title.textContent=project.name;document.getElementById("projectChooser").classList.add("hidden");document.getElementById("projectArea").classList.remove("hidden");fixLayout();FileList.clear();FileList.setProjectId(id);redrawOpenedDocs(id);}
function openFile(uri){if(!uri)uri="";setHash(activeProject.id+"/"+uri);}
function unloadFile(){openFile(UNSAVED_FILENAME);codeMirror.focus();}
function createNewFile(){XioPop.prompt("Enter the new filename","","",function(newFileName){if(newFileName===false){console.debug("abort file creation");return;}else if(newFileName.trim()===""){console.debug("not a valid filename");XioPop.alert("Invalid filename","You must enter a valid filename, try again",function(){createNewFile();});}else{Ajax.getJSON("/scripts/file_handler.php",{do:"new",project_id:activeProject.id,uri:escape(newFileName)},fileCreationCallback);}});}
function fileCreationCallback(json){if(!json)return false;switch(json.status){case STATUS_OK:console.log("file saved as ",json.uri);FileList.loadProjectFiles();openFile(json.uri);break;case STATUS_FILE_COLLISION:XioPop.confirm("File already exists","Are you sure you want to overwrite "+json.uri+"?",function(answer){if(answer){Ajax.getJSON("/scripts/file_handler.php",{do:"new",project_id:activeProject.id,uri:escape(newFileName),overwrite:true},fileCreationCallback);}});break;default:console.warn("handle callback",json);}}
function saveFile(){codeMirror.save();var formData=new FormData();formData.append("uri",activeFile);formData.append("project_id",activeProject.id);formData.append("code",codeMirror.getValue());console.log("Save file '"+activeFile+"'...");FileList.showSpinner(activeFile);var xhr=new XMLHttpRequest();xhr.open("POST","/scripts/save.php",true);xhr.onload=function(e){if(e.target.status===200){setFileToClean(activeFile);console.log("File saved");}else{console.error("Error saving file",e);}
FileList.hideSpinner(activeFile);};xhr.send(formData);}
function saveFileAs(newFileName,overwrite){codeMirror.save();var formData=new FormData();formData.append("uri",newFileName);formData.append("project_id",activeProject.id);formData.append("code",codeMirror.getValue());formData.append("do","saveAs");if(overwrite)formData.append("overwrite",true);var xhr=new XMLHttpRequest();xhr.open("POST","/scripts/file_handler.php",true);xhr.onload=function(e){var json=validateCallback(e);if(!json)return false;switch(json.status){case STATUS_OK:console.log("file saved as ",json.uri);FileList.loadProjectFiles();openFile(json.uri);if(activeFile===UNSAVED_FILENAME){delete xioDocs[activeProject.id][activeFile];}
break;case STATUS_FILE_COLLISION:XioPop.confirm("File already exists","Are you sure you want to overwrite "+json.uri+"?",function(answer){if(answer){saveFileAs(newFileName,true);}});break;default:console.warn("handle callback",json);}};xhr.send(formData);}
function setHash(newHash){if(!newHash){history.pushState({foo:"bar"},"kokooo","/");readHash();oldHash="";}else if(newHash!=oldHash){window.location.hash=newHash;oldHash=newHash;}}
function readHash(){var hash=window.location.hash;if(oldHash===hash)return;console.log("Read hash",hash,window.location.hash);var match=hash.match(/^#([^\/]*)\/?(.*)$/);if(match){var project_id=match[1];var uri=match[2];console.log("   project_id:",project_id);console.log("   uri:",uri);if(!activeProject||(activeProject&&project_id!=activeProject.id)){console.log("Open project",project_id);openProject(project_id);}
if(uri){if(uri!==activeFile){getOrCreateDoc(project_id,uri);FileList.setActiveFile(uri);}}else{unloadFile();}}else{console.log("  Show projects page");chooseProject();}
oldHash=hash;}
function chooseProject(){document.getElementById("projectChooser").classList.remove("hidden");document.getElementById("projectArea").classList.add("hidden");title.textContent="My projects";activeProject=null;document.tite=pageTitle;projectsFilter.focus();}
function setFileToClean(uri){console.log(uri,"is now clean");var doc=xioDocs[activeProject.id][uri];doc.markClean();updateCleanStatus(uri);}
function updateCleanStatus(uri){var tab=openedList.querySelector("li[data-uri='"+uri+"']");if(xioDocs[activeProject.id][uri].isClean()){document.getElementById("btnSave").classList.add("disabled");FileList.setFileAsClean(uri);if(tab)tab.classList.remove("changed");}else{document.getElementById("btnSave").classList.remove("disabled");FileList.setFileAsDirty(uri);if(tab)tab.classList.add("changed");}}
function findFunctions(){console.log("Finding functions");var text=codeMirror.getValue();var doc=codeMirror.getDoc();var functions=[];var hit;var re=new RegExp("function\\s+([A-Z0-9_]+)\\s*\\(([^\\)]*)\\)","gmi");while(hit=re.exec(text)){var pos=doc.posFromIndex(hit.index);var argus=hit[2].replace(" ","").split(",");functions.push({"name":hit[1],"args":argus,"index":hit.index,"line":pos.line,"char":pos.char});}
re=new RegExp("([A-Z0-9_]+)\\s*=\\s*function\\s*\\(([^\\)]*)\\)","gmi");while(hit=re.exec(text)){console.log("func 2",hit);var pos=doc.posFromIndex(hit.index);var argus=hit[2].replace(" ","").split(",");functions.push({"name":hit[1],"args":argus,"index":hit.index,"line":pos.line,"char":pos.char});}
function compare(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0;}
functions.sort(compare);return functions;}
function toHumanReadableFileSize(bytes,si){var unit=si?1000:1024;if(bytes<unit)return bytes+" bytes";var exp=Math.floor(Math.log(bytes)/ Math.log(unit));var pre=(si?"kMGTPE":"KMGTPE").charAt(exp-1)+(si?"":"i");var val=bytes/Math.pow(unit,exp);return val.toFixed(1)+" "+pre+"B";}
var clone=(function(){return function(obj){Clone.prototype=obj;return new Clone();};function Clone(){}}());init();var ProjectList=(function(){var projects,projectsArrayByName,projectsArrayByDate;var projectsList,projectsFilter,btnNewProject;var init=function(){projectsList=document.getElementById('projectsList');projectsList.addEventListener("click",clickHandler,false);projectsFilter=document.getElementById('projectsFilter');projectsFilter.addEventListener("search",filterProjects);projectsFilter.addEventListener("keyup",filterProjects);btnNewProject=document.getElementById("btnNewProject");btnNewProject.addEventListener("click",addNewProject,false);};var loadProjects=function(){if(!projectsList)init();Ajax.getJSON("/scripts/get_all_projects.php",null,function(json){projects=json;projectsArrayByName=Object.keys(projects);projectsArrayByDate=Object.keys(projects);projectsArrayByName.sort(function(a,b){var n1=projects[a].name;var n2=projects[b].name;if(n1<n2)return-1;if(n1>n2)return 1;return 0;});console.log(projectsArrayByDate);projectsArrayByDate.sort(function(a,b){var c1=projects[a].created||0;var c2=projects[b].created||0;return c2-c1;});console.log(projectsArrayByDate);display();console.log("%i projects found",Object.keys(projects).length,projects);filterProjects();readHash();if(activeProject){var pId=activeProject.id
activeProject=projects[pId];activeProject.id=pId;document.title=pageTitle+" - "+activeProject.name;title.textContent=activeProject.name;}});};var display=function(){var projectsHTML=[];projectsArrayByDate.forEach(function(id,i){var item=projects[id];projectsHTML.push("<li data-project_id='"+id+"'>");projectsHTML.push("<h3>"+item.name+"</h3>");projectsHTML.push("<div style='display: block;'>");if(item.description)projectsHTML.push("<p>"+item.description+"</p>");projectsHTML.push("<a href='#' data-do='config'>Config</a>");projectsHTML.push("<a href='#' data-do='rename'>Rename</a>");projectsHTML.push("<a href='#' data-do='delete'>Delete</a>");projectsHTML.push("</div>");projectsHTML.push("</li>");});projectsList.innerHTML=projectsHTML.join("");};var clickHandler=function(e){var target=e.target;var doo;if(target.nodeName==="A"){doo=target.dataset.do;console.log("Do",doo);e.preventDefault();}
var li=target;while(li.nodeName!=="LI"){if(li==projectsList)return;li=li.parentElement;}
var projectId=li.dataset.project_id;switch(doo){case"delete":var project=projects[projectId];XioPop.confirm("Delete project?","Are you sure you want to delete project '"+project.name+"'?",function(answer){if(answer){var formData=new FormData();formData.append("project_id",projectId);var xhr=new XMLHttpRequest();xhr.open('POST',"/scripts/delete_project.php",true);xhr.onload=function(e){var xhr=e.target;if(xhr.status===200){console.log("Project deleted");loadProjects();}else{console.err("Error deleting project",xhr);}};xhr.send(formData);}});break;case"rename":XioPop.prompt("Rename project","Enter a new name for the project",projects[projectId].name,function(newName){if(newName){var formData=new FormData();formData.append("new_name",newName);formData.append("project_id",projectId);var xhr=new XMLHttpRequest();xhr.open('POST',"/scripts/rename_project.php",true);xhr.onload=function(e){var xhr=e.target;if(xhr.status===200){console.log("Project renamed");findProjects();}else{console.err("Error renaming project",xhr);}};xhr.send(formData);}});break;case"config":openProjectConfig(projectId);break;default:setHash(projectId+"/"+UNSAVED_FILENAME);}};function filterProjects(e){var searchString=projectsFilter.value.toLowerCase();if(e&&e.which==KEY_ENTER&&searchString){var firstItem=projectsList.querySelector("li:not(.hidden)");setHash(firstItem.getAttribute('data-project_id')+"/"+UNSAVED_FILENAME);return false;}else{console.log("filter projects '"+searchString+"'",projectsFilter,projects);for(var id in projects){if(projects.hasOwnProperty(id)){var project=projects[id];var li=projectsList.querySelector("li[data-project_id='"+id+"']");if(project.name.toLowerCase().search(searchString)!=-1){li.classList.remove('hidden');}else{li.classList.add('hidden');}}}}}
var addNewProject=function(){XioPop.prompt("Enter the projects name","","",function(projectName){if(projectName){var xhr=new XMLHttpRequest();xhr.open("get","/scripts/new_project.php?projectName="+projectName,true);xhr.onload=function(e){if(e.target.status===200){loadProjects();}};xhr.send();}});};var getProject=function(id){if(projects[id]){return projects[id];}
return false;};var clear=function(){projects=null;projectsList.innerHTML="";};var isLoaded=function(){return projects!==null;};return{isLoaded:isLoaded,clear:clear,getProject:getProject,loadProjects:loadProjects};})();var codeMirror;var snippets={"html":"<!doctype html>\n<html>\n\t<head>\n\t\t<title>Page Title</title>\n\t\t<meta charset=\"utf-8\" />\n\t\t<link rel=\"stylesheet\" href=\"style.css\" type=\"text/css\" />\n\t</head>\n\t<body>\n\t\t\n\t</body>\n</html>","css":"<link rel=\"stylesheet\" href=\"style.css\" type=\"text/css\" />","mobile":"<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\" />","com":"/**********************************************************\n\n\n**********************************************************/","phperror":"ini_set('display_errors',1);\nini_set('error_reporting', E_ALL ^ E_NOTICE);","xhr":"xhr = new XMLHttpRequest();"};function initWriter(){if(codeMirror)return;codeMirror=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:true,matchBrackets:true,smartIndent:false,styleActiveLine:true,indentUnit:4,indentWithTabs:true,highlightSelectionMatches:true,extraKeys:{"Tab":"tabWithAutoComplete","Shift-Tab":"indentLess","Ctrl-D":"removeLines","Cmd-D":"removeLines","Ctrl-N":"newFile","Cmd-N":"newFile","Ctrl-S":"shortcutSave","Cmd-S":"shortcutSave","Alt-Down":function(editor){CodeMirror.commands.moveRow(editor,false);},"Alt-Up":function(editor){CodeMirror.commands.moveRow(editor,true);},"Ctrl-Alt-Down":function(editor){CodeMirror.commands.duplicateRow(editor,false);},"Cmd-Alt-Down":function(editor){CodeMirror.commands.duplicateRow(editor,false);},"Ctrl-Alt-Up":function(editor){CodeMirror.commands.duplicateRow(editor,true);},"Cmd-Alt-Up":function(editor){CodeMirror.commands.duplicateRow(editor,true);},"Cmd-I":"selectLines","Ctrl-I":"selectLines","Cmd-L":"jump2Line","Ctrl-L":"jump2Line","Cmd-O":"showAllFunctions","Ctrl-O":"showAllFunctions"}});console.groupCollapsed("CodeMirror",CodeMirror.version,"loaded");console.log("Modes",CodeMirror.modes);console.log("Mimes",CodeMirror.mimeModes);console.groupEnd();codeMirror.on("dragover",function(cm,e){cm.setCursor(cm.coordsChar({left:e.x,top:e.y}));cm.focus();});codeMirror.on("drop",function(cm,e){var uri=e.dataTransfer.getData("uri");if(uri){console.log("Drop on cm",e.dataTransfer.getData("uri"));cm.replaceSelection(e.dataTransfer.getData("uri"));e.preventDefault();}});codeMirror.on("change",function(cm,change){if(activeFile){updateCleanStatus(activeFile);}});}
CodeMirror.commands.moveRow=function(editor,up){CodeMirror.commands.selectLines(editor);var startLine=editor.getCursor("start").line;var endLine=editor.getCursor("end").line;var nextRow=editor.getLine(endLine+1);var prevRow=editor.getLine(startLine-1);if(up&&startLine>0){editor.removeLine(startLine-1);editor.setLine(endLine,prevRow+"\n"+nextRow);}else if(!up){console.log(startLine);editor.removeLine(endLine+1);if(startLine==0){pos={line:0,ch:0};editor.replaceRange(nextRow+"\n",pos,pos);}else{editor.setLine(startLine-1,prevRow+"\n"+nextRow);}}}
CodeMirror.commands.duplicateRow=function(editor,up){CodeMirror.commands.selectLines(editor);var startLine=editor.getCursor("start").line;var endLine=editor.getCursor("end").line;var text=editor.getSelection();if(up){var nextRow=editor.getLine(endLine+1);editor.setLine(endLine+1,text+"\n"+nextRow);}else{var prevRow=editor.getLine(startLine-1);editor.setLine(startLine-1,prevRow+"\n"+text);}}
CodeMirror.commands.removeLines=function(editor){editor.replaceSelection("");var pos=editor.getCursor();editor.removeLine(pos.line);editor.setCursor(pos);}
CodeMirror.commands.selectLines=function(editor){var posStart=editor.getCursor("start");var posEnd=editor.getCursor("end");posStart.ch=0;posEnd.ch=editor.getLine(posEnd.line).length;editor.setSelection(posStart,posEnd);}
CodeMirror.commands.tabWithAutoComplete=function(editor){console.log("tabWithAutoComplete");var cur=editor.getCursor();var c=editor.getSearchCursor(/\s/);match=c.matches(true,cur);console.log("match",match);var start;if(match){start=match.to;}else{start={line:cur.line,ch:0};}
text=editor.getRange(start,cur).trim();if(snippets[text]){editor.replaceRange(snippets[text],start,cur);}else{CodeMirror.commands[editor.getSelection().length?"indentMore":"insertTab"](editor);}}
CodeMirror.commands.shortcutSave=function(editor){console.log("Ctrl/Cmd+s pressed, saving...");saveFile();}
CodeMirror.commands.newFile=function(editor){console.log("Ctrl/Cmd+n pressed, new file...");unloadFile();}
CodeMirror.commands.jump2Line=function(editor,line){if(line===undefined){XioPop.prompt("Jump to line","Enter the desired line number","",function(lineNumber){if(Number(lineNumber)>0){CodeMirror.commands.jump2Line(editor,Number(lineNumber)-1);}});return;}
editor.setCursor(line+100,0);editor.setCursor(line-10,0);editor.setCursor(line,0);codeMirror.focus();}
CodeMirror.commands.rightTrimLines=function(editor,line){}
CodeMirror.commands.showAllFunctions=function(editor){var functions=findFunctions();console.log(functions);var div=document.createElement("div");div.classList.add("filteredSelectList");var filter=document.createElement("input");filter.type="search";filter.addEventListener("keyup",function(e){if(e&&e.which==13){var first=list.querySelector("li");if(!first)return;console.log("Choose the first",first);var line=Number(first.getAttribute("data-line"));XioPop.close();CodeMirror.commands.jump2Line(editor,line);}else{var searchString=e.target.value.toLowerCase();console.log("filter functions '"+searchString+"'");for(var id in functions){var func=functions[id];console.log(id,func);var li=list.querySelector("li[data-id='"+id+"']");if(func.name.toLowerCase().search(searchString)!=-1){li.classList.remove('hidden');}else{li.classList.add('hidden');}}}});var list=document.createElement("ul");list.classList.add("selectableList","functions");list.addEventListener("click",function(e){var target=e.target;if(target.nodeName==="LI"){var line=Number(target.getAttribute("data-line"));XioPop.close();CodeMirror.commands.jump2Line(editor,line);}});for(var i=0;i<functions.length;i++){var f=functions[i];var item=document.createElement("li");item.textContent=f.name+" ("+f.args.join(", ")+")";item.setAttribute("data-line",f.line);item.setAttribute("data-id",i);list.appendChild(item);}
div.appendChild(filter);div.appendChild(list);XioPop.showElement(div);filter.focus();}
var selStart,selEnd;function selectTheme(){var input=document.getElementById("skinSelect");var theme=input.options[input.selectedIndex].innerHTML;codeMirror.setOption("theme",theme);console.log("Set theme to:",theme);}
var xioDocs={};var openedList=document.getElementById("openedList");openedList.addEventListener("click",function(e){var target=e.target;while(target.nodeName!=="LI"){if(target==openedList)return;target=target.parentElement;}
console.log("Click on tab",target,e.target,e);if(e.target.classList.contains("close")||e.which===2){console.log("Close tab",target);var doc=xioDocs[activeProject.id][target.dataset.uri];if(!doc.isClean()){XioPop.confirm("Unsaved file","This file has unsaved data, close anyway?",function(answer){if(answer)closeDoc(activeProject.id,target.dataset.uri);;});}else{closeDoc(activeProject.id,target.dataset.uri);}
return;}
openFile(target.dataset.uri);},false);function redrawOpenedDocs(projectId){var html="";var oFiles=xioDocs[projectId];openedList.innerHTML="";for(var property in oFiles){if(oFiles.hasOwnProperty(property)){var doc=oFiles[property];var active=activeFile===property;var classes=[];var li=document.createElement("LI");li.dataset.uri=property;if(active)li.classList.add("selected");if(!doc.isClean())li.classList.add("changed");var filename=document.createElement("span");filename.textContent=property.replace(/^.*[\\\/]/,'');filename.title=property;filename.classList.add("filename");var close=document.createElement("span");close.classList.add("el-icon-remove-sign","close");li.appendChild(filename);li.appendChild(close);openedList.appendChild(li);}}}
function closeDoc(projectId,uri){var oFiles=xioDocs[projectId];delete oFiles[uri];redrawOpenedDocs(projectId);for(var oUri in oFiles);console.log("oUri",oUri);if(oUri&&activeFile!==oUri){openFile(oUri);}else if(oUri===undefined){console.log("Open empty");openFile();}}
function getOrCreateDoc(projectId,uri){console.log("getOrCreateDoc",uri);if(xioDocs.hasOwnProperty(projectId)&&xioDocs[projectId].hasOwnProperty(uri)){var doc=xioDocs[projectId][uri];console.log("swap to doc",doc);codeMirror.swapDoc(doc);setActiveFile(projectId,uri);codeMirror.focus();redrawOpenedDocs(projectId);console.log("Doc",doc);}else{loadDoc(projectId,uri);}}
function loadDoc(projectId,uri){if(uri===UNSAVED_FILENAME){docLoaded(projectId,uri,"");return;}
var xhr=new XMLHttpRequest();xhr.open("get","/scripts/load_file.php?project_id="+projectId+"&uri="+encodeURI(uri),true);console.log("Loading '"+uri+"' from disk.");xhr.onload=function(e){docLoaded(projectId,uri,e.target.responseText);};xhr.send();}
function docLoaded(projectId,uri,data){var mode=getDocType(uri);var doc=CodeMirror.Doc(data,mode);var old=codeMirror.swapDoc(doc);if(!xioDocs.hasOwnProperty(projectId))xioDocs[projectId]={};xioDocs[projectId][uri]=doc;codeMirror.focus();setActiveFile(projectId,uri);redrawOpenedDocs(projectId);}
function setActiveFile(projectId,uri){var doc=xioDocs[projectId][uri];activeFile=uri;updateCleanStatus(uri);}
function getDocType(uri){var re=/(?:\.([^.]+))?$/;var ext=re.exec(uri);switch(ext[1]){case"php":return"application/x-httpd-php";break;case"js":return"text/javascript";break;case"html":case"htm":return"text/html";break;case"css":return"text/css";break;case"xml":case"svg":return"application/xml";break;default:return"text/plain";}}
CodeMirror.defineMode("xml",function(config,parserConfig){var indentUnit=config.indentUnit;var multilineTagIndentFactor=parserConfig.multilineTagIndentFactor||1;var multilineTagIndentPastTag=parserConfig.multilineTagIndentPastTag||true;var Kludges=parserConfig.htmlMode?{autoSelfClosers:{'area':true,'base':true,'br':true,'col':true,'command':true,'embed':true,'frame':true,'hr':true,'img':true,'input':true,'keygen':true,'link':true,'meta':true,'param':true,'source':true,'track':true,'wbr':true},implicitlyClosed:{'dd':true,'li':true,'optgroup':true,'option':true,'p':true,'rp':true,'rt':true,'tbody':true,'td':true,'tfoot':true,'th':true,'tr':true},contextGrabbers:{'dd':{'dd':true,'dt':true},'dt':{'dd':true,'dt':true},'li':{'li':true},'option':{'option':true,'optgroup':true},'optgroup':{'optgroup':true},'p':{'address':true,'article':true,'aside':true,'blockquote':true,'dir':true,'div':true,'dl':true,'fieldset':true,'footer':true,'form':true,'h1':true,'h2':true,'h3':true,'h4':true,'h5':true,'h6':true,'header':true,'hgroup':true,'hr':true,'menu':true,'nav':true,'ol':true,'p':true,'pre':true,'section':true,'table':true,'ul':true},'rp':{'rp':true,'rt':true},'rt':{'rp':true,'rt':true},'tbody':{'tbody':true,'tfoot':true},'td':{'td':true,'th':true},'tfoot':{'tbody':true},'th':{'td':true,'th':true},'thead':{'tbody':true,'tfoot':true},'tr':{'tr':true}},doNotIndent:{"pre":true},allowUnquoted:true,allowMissing:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false};var alignCDATA=parserConfig.alignCDATA;var tagName,type,setStyle;function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state);}
var ch=stream.next();if(ch=="<"){if(stream.eat("!")){if(stream.eat("[")){if(stream.match("CDATA["))return chain(inBlock("atom","]]>"));else return null;}else if(stream.match("--")){return chain(inBlock("comment","-->"));}else if(stream.match("DOCTYPE",true,true)){stream.eatWhile(/[\w\._\-]/);return chain(doctype(1));}else{return null;}}else if(stream.eat("?")){stream.eatWhile(/[\w\._\-]/);state.tokenize=inBlock("meta","?>");return"meta";}else{var isClose=stream.eat("/");tagName="";var c;while((c=stream.eat(/[^\s\u00a0=<>\"\'\/?]/)))tagName+=c;if(!tagName)return"tag error";type=isClose?"closeTag":"openTag";state.tokenize=inTag;return"tag";}}else if(ch=="&"){var ok;if(stream.eat("#")){if(stream.eat("x")){ok=stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";");}else{ok=stream.eatWhile(/[\d]/)&&stream.eat(";");}}else{ok=stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";");}
return ok?"atom":"error";}else{stream.eatWhile(/[^&<]/);return null;}}
function inTag(stream,state){var ch=stream.next();if(ch==">"||(ch=="/"&&stream.eat(">"))){state.tokenize=inText;type=ch==">"?"endTag":"selfcloseTag";return"tag";}else if(ch=="="){type="equals";return null;}else if(ch=="<"){state.tokenize=inText;state.state=baseState;state.tagName=state.tagStart=null;var next=state.tokenize(stream,state);return next?next+" error":"error";}else if(/[\'\"]/.test(ch)){state.tokenize=inAttribute(ch);state.stringStartCol=stream.column();return state.tokenize(stream,state);}else{stream.eatWhile(/[^\s\u00a0=<>\"\']/);return"word";}}
function inAttribute(quote){var closure=function(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inTag;break;}}
return"string";};closure.isInAttribute=true;return closure;}
function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break;}
stream.next();}
return style;};}
function doctype(depth){return function(stream,state){var ch;while((ch=stream.next())!=null){if(ch=="<"){state.tokenize=doctype(depth+1);return state.tokenize(stream,state);}else if(ch==">"){if(depth==1){state.tokenize=inText;break;}else{state.tokenize=doctype(depth-1);return state.tokenize(stream,state);}}}
return"meta";};}
function Context(state,tagName,startOfLine){this.prev=state.context;this.tagName=tagName;this.indent=state.indented;this.startOfLine=startOfLine;if(Kludges.doNotIndent.hasOwnProperty(tagName)||(state.context&&state.context.noIndent))
this.noIndent=true;}
function popContext(state){if(state.context)state.context=state.context.prev;}
function maybePopContext(state,nextTagName){var parentTagName;while(true){if(!state.context){return;}
parentTagName=state.context.tagName.toLowerCase();if(!Kludges.contextGrabbers.hasOwnProperty(parentTagName)||!Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)){return;}
popContext(state);}}
function baseState(type,stream,state){if(type=="openTag"){state.tagName=tagName;state.tagStart=stream.column();return attrState;}else if(type=="closeTag"){var err=false;if(state.context){if(state.context.tagName!=tagName){if(Kludges.implicitlyClosed.hasOwnProperty(state.context.tagName.toLowerCase()))
popContext(state);err=!state.context||state.context.tagName!=tagName;}}else{err=true;}
if(err)setStyle="error";return err?closeStateErr:closeState;}else{return baseState;}}
function closeState(type,_stream,state){if(type!="endTag"){setStyle="error";return closeState;}
popContext(state);return baseState;}
function closeStateErr(type,stream,state){setStyle="error";return closeState(type,stream,state);}
function attrState(type,_stream,state){if(type=="word"){setStyle="attribute";return attrEqState;}else if(type=="endTag"||type=="selfcloseTag"){var tagName=state.tagName,tagStart=state.tagStart;state.tagName=state.tagStart=null;if(type=="selfcloseTag"||Kludges.autoSelfClosers.hasOwnProperty(tagName.toLowerCase())){maybePopContext(state,tagName.toLowerCase());}else{maybePopContext(state,tagName.toLowerCase());state.context=new Context(state,tagName,tagStart==state.indented);}
return baseState;}
setStyle="error";return attrState;}
function attrEqState(type,stream,state){if(type=="equals")return attrValueState;if(!Kludges.allowMissing)setStyle="error";return attrState(type,stream,state);}
function attrValueState(type,stream,state){if(type=="string")return attrContinuedState;if(type=="word"&&Kludges.allowUnquoted){setStyle="string";return attrState;}
setStyle="error";return attrState(type,stream,state);}
function attrContinuedState(type,stream,state){if(type=="string")return attrContinuedState;return attrState(type,stream,state);}
return{startState:function(){return{tokenize:inText,state:baseState,indented:0,tagName:null,tagStart:null,context:null};},token:function(stream,state){if(!state.tagName&&stream.sol())
state.indented=stream.indentation();if(stream.eatSpace())return null;tagName=type=null;var style=state.tokenize(stream,state);if((style||type)&&style!="comment"){setStyle=null;state.state=state.state(type||style,stream,state);if(setStyle)
style=setStyle=="error"?style+" error":setStyle;}
return style;},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute){return state.stringStartCol+1;}
if(context&&context.noIndent)return CodeMirror.Pass;if(state.tokenize!=inTag&&state.tokenize!=inText)
return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName){if(multilineTagIndentPastTag)
return state.tagStart+state.tagName.length+2;else
return state.tagStart+indentUnit*multilineTagIndentFactor;}
if(alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;if(context&&/^<\//.test(textAfter))
context=context.prev;while(context&&!context.startOfLine)
context=context.prev;if(context)return context.indent+indentUnit;else return 0;},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:parserConfig.htmlMode?"html":"xml",helperType:parserConfig.htmlMode?"html":"xml"};});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html"))
CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var statementIndent=parserConfig.statementIndent;var jsonMode=parserConfig.json;var isTS=parserConfig.typescript;var keywords=function(){function kw(type){return{type:type,style:"keyword"};}
var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={"if":kw("if"),"while":A,"with":A,"else":B,"do":B,"try":B,"finally":B,"return":C,"break":C,"continue":C,"new":C,"delete":C,"throw":C,"debugger":C,"var":kw("var"),"const":kw("var"),"let":kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"typeof":operator,"instanceof":operator,"true":atom,"false":atom,"null":atom,"undefined":atom,"NaN":atom,"Infinity":atom,"this":kw("this"),"module":kw("module"),"class":kw("class"),"super":kw("atom"),"yield":C,"export":kw("export"),"import":kw("import"),"extends":C};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={"interface":kw("interface"),"extends":kw("extends"),"constructor":kw("constructor"),"public":kw("public"),"private":kw("private"),"protected":kw("protected"),"static":kw("static"),"string":type,"number":type,"bool":type,"any":type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr];}}
return jsKeywords;}();var isOperatorChar=/[+\-*&%=<>!?|~^]/;function readRegexp(stream){var escaped=false,next,inSet=false;while((next=stream.next())!=null){if(!escaped){if(next=="/"&&!inSet)return;if(next=="[")inSet=true;else if(inSet&&next=="]")inSet=false;}
escaped=!escaped&&next=="\\";}}
var type,content;function ret(tp,style,cont){type=tp;content=cont;return style;}
function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state);}else if(ch=="."&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/)){return ret("number","number");}else if(ch=="."&&stream.match("..")){return ret("spread","meta");}else if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch);}else if(ch=="="&&stream.eat(">")){return ret("=>","operator");}else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number");}else if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number");}else if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state);}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment");}else if(state.lastType=="operator"||state.lastType=="keyword c"||state.lastType=="sof"||/^[\[{}\(,;:]$/.test(state.lastType)){readRegexp(stream);stream.eatWhile(/[gimy]/);return ret("regexp","string-2");}else{stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current());}}else if(ch=="`"){state.tokenize=tokenQuasi;return tokenQuasi(stream,state);}else if(ch=="#"){stream.skipToEnd();return ret("error","error");}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current());}else{stream.eatWhile(/[\w\$_]/);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return(known&&state.lastType!=".")?ret(known.type,known.style,word):ret("variable","variable",word);}}
function tokenString(quote){return function(stream,state){var escaped=false,next;while((next=stream.next())!=null){if(next==quote&&!escaped)break;escaped=!escaped&&next=="\\";}
if(!escaped)state.tokenize=tokenBase;return ret("string","string");};}
function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break;}
maybeEnd=(ch=="*");}
return ret("comment","comment");}
function tokenQuasi(stream,state){var escaped=false,next;while((next=stream.next())!=null){if(!escaped&&(next=="`"||next=="$"&&stream.eat("{"))){state.tokenize=tokenBase;break;}
escaped=!escaped&&next=="\\";}
return ret("quasi","string-2",stream.current());}
var brackets="([{}])";function findFatArrow(stream,state){if(state.fatArrowAt)state.fatArrowAt=null;var arrow=stream.string.indexOf("=>",stream.start);if(arrow<0)return;var depth=0,sawSomething=false;for(var pos=arrow-1;pos>=0;--pos){var ch=stream.string.charAt(pos);var bracket=brackets.indexOf(ch);if(bracket>=0&&bracket<3){if(!depth){++pos;break;}
if(--depth==0)break;}else if(bracket>=3&&bracket<6){++depth;}else if(/[$\w]/.test(ch)){sawSomething=true;}else if(sawSomething&&!depth){++pos;break;}}
if(sawSomething&&!depth)state.fatArrowAt=pos;}
var atomicTypes={"atom":true,"number":true,"variable":true,"string":true,"regexp":true,"this":true};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align;}
function inScope(state,varname){for(var v=state.localVars;v;v=v.next)
if(v.name==varname)return true;for(var cx=state.context;cx;cx=cx.prev){for(var v=cx.vars;v;v=v.next)
if(v.name==varname)return true;}}
function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=true;while(true){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)
cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";return style;}}}
var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i]);}
function cont(){pass.apply(null,arguments);return true;}
function register(varname){function inList(list){for(var v=list;v;v=v.next)
if(v.name==varname)return true;return false;}
var state=cx.state;if(state.context){cx.marked="def";if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars};}else{if(inList(state.globalVars))return;if(parserConfig.globalVars)
state.globalVars={name:varname,next:state.globalVars};}}
var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars;}
function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev;}
function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if(state.lexical.type=="stat")indent=state.lexical.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info);};result.lex=true;return result;}
function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")
state.indented=state.lexical.indented;state.lexical=state.lexical.prev;}}
poplex.lex=true;function expect(wanted){return function(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(arguments.callee);};}
function statement(type,value){if(type=="var")return cont(pushlex("vardef",value.length),vardef,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),expression,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),block,poplex);if(type==";")return cont();if(type=="if")return cont(pushlex("form"),expression,statement,poplex,maybeelse);if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),forspec,statement,poplex);if(type=="variable")return cont(pushlex("stat"),maybelabel);if(type=="switch")return cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);if(type=="module")return cont(pushlex("form"),pushcontext,afterModule,popcontext,poplex);if(type=="class")return cont(pushlex("form"),className,objlit,poplex);if(type=="export")return cont(pushlex("form"),afterExport,poplex);if(type=="import")return cont(pushlex("form"),afterImport,poplex);return pass(pushlex("stat"),expression,expect(";"),poplex);}
function expression(type){return expressionInner(type,false);}
function expressionNoComma(type){return expressionInner(type,true);}
function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if(type=="(")return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);else if(type=="variable")return pass(pushcontext,pattern,expect("=>"),body,popcontext);}
var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;if(atomicTypes.hasOwnProperty(type))return cont(maybeop);if(type=="function")return cont(functiondef);if(type=="keyword c")return cont(noComma?maybeexpressionNoComma:maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,comprehension,expect(")"),poplex,maybeop);if(type=="operator"||type=="spread")return cont(noComma?expressionNoComma:expression);if(type=="[")return cont(pushlex("]"),arrayLiteral,poplex,maybeop);if(type=="{")return contCommasep(objprop,"}",null,maybeop);return cont();}
function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression);}
function maybeexpressionNoComma(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expressionNoComma);}
function maybeoperatorComma(type,value){if(type==",")return cont(expression);return maybeoperatorNoComma(type,value,false);}
function maybeoperatorNoComma(type,value,noComma){var me=noComma==false?maybeoperatorComma:maybeoperatorNoComma;var expr=noComma==false?expression:expressionNoComma;if(value=="=>")return cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext);if(type=="operator"){if(/\+\+|--/.test(value))return cont(me);if(value=="?")return cont(expression,expect(":"),expr);return cont(expr);}
if(type=="quasi"){cx.cc.push(me);return quasi(value);}
if(type==";")return;if(type=="(")return contCommasep(expressionNoComma,")","call",me);if(type==".")return cont(property,me);if(type=="[")return cont(pushlex("]"),maybeexpression,expect("]"),poplex,me);}
function quasi(value){if(value.slice(value.length-2)!="${")return cont();return cont(expression,continueQuasi);}
function continueQuasi(type){if(type=="}"){cx.marked="string-2";cx.state.tokenize=tokenQuasi;return cont();}}
function arrowBody(type){findFatArrow(cx.stream,cx.state);if(type=="{")return pass(statement);return pass(expression);}
function arrowBodyNoComma(type){findFatArrow(cx.stream,cx.state);if(type=="{")return pass(statement);return pass(expressionNoComma);}
function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperatorComma,expect(";"),poplex);}
function property(type){if(type=="variable"){cx.marked="property";return cont();}}
function objprop(type,value){if(type=="variable"){cx.marked="property";if(value=="get"||value=="set")return cont(getterSetter);}else if(type=="number"||type=="string"){cx.marked=type+" property";}else if(type=="["){return cont(expression,expect("]"),afterprop);}
if(atomicTypes.hasOwnProperty(type))return cont(afterprop);}
function getterSetter(type){if(type!="variable")return pass(afterprop);cx.marked="property";return cont(functiondef);}
function afterprop(type){if(type==":")return cont(expressionNoComma);if(type=="(")return pass(functiondef);}
function commasep(what,end){function proceed(type){if(type==","){var lex=cx.state.lexical;if(lex.info=="call")lex.pos=(lex.pos||0)+1;return cont(what,proceed);}
if(type==end)return cont();return cont(expect(end));}
return function(type){if(type==end)return cont();return pass(what,proceed);};}
function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)
cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex);}
function block(type){if(type=="}")return cont();return pass(statement,block);}
function maybetype(type){if(isTS&&type==":")return cont(typedef);}
function typedef(type){if(type=="variable"){cx.marked="variable-3";return cont();}}
function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont);}
function pattern(type,value){if(type=="variable"){register(value);return cont();}
if(type=="[")return contCommasep(pattern,"]");if(type=="{")return contCommasep(proppattern,"}");}
function proppattern(type,value){if(type=="variable"&&!cx.stream.match(/^\s*:/,false)){register(value);return cont(maybeAssign);}
if(type=="variable")cx.marked="property";return cont(expect(":"),pattern,maybeAssign);}
function maybeAssign(_type,value){if(value=="=")return cont(expressionNoComma);}
function vardefCont(type){if(type==",")return cont(vardef);}
function maybeelse(type,value){if(type=="keyword b"&&value=="else")return cont(pushlex("form"),statement,poplex);}
function forspec(type){if(type=="(")return cont(pushlex(")"),forspec1,expect(")"),poplex);}
function forspec1(type){if(type=="var")return cont(vardef,expect(";"),forspec2);if(type==";")return cont(forspec2);if(type=="variable")return cont(formaybeinof);return pass(expression,expect(";"),forspec2);}
function formaybeinof(_type,value){if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression);}
return cont(maybeoperatorComma,forspec2);}
function forspec2(type,value){if(type==";")return cont(forspec3);if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression);}
return pass(expression,expect(";"),forspec3);}
function forspec3(type){if(type!=")")cont(expression);}
function functiondef(type,value){if(value=="*"){cx.marked="keyword";return cont(functiondef);}
if(type=="variable"){register(value);return cont(functiondef);}
if(type=="(")return cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,statement,popcontext);}
function funarg(type){if(type=="spread")return cont(funarg);return pass(pattern,maybetype);}
function className(type,value){if(type=="variable"){register(value);return cont(classNameAfter);}}
function classNameAfter(_type,value){if(value=="extends")return cont(expression);}
function objlit(type){if(type=="{")return contCommasep(objprop,"}");}
function afterModule(type,value){if(type=="string")return cont(statement);if(type=="variable"){register(value);return cont(maybeFrom);}}
function afterExport(_type,value){if(value=="*"){cx.marked="keyword";return cont(maybeFrom,expect(";"));}
if(value=="default"){cx.marked="keyword";return cont(expression,expect(";"));}
return pass(statement);}
function afterImport(type){if(type=="string")return cont();return pass(importSpec,maybeFrom);}
function importSpec(type,value){if(type=="{")return contCommasep(importSpec,"}");if(type=="variable")register(value);return cont();}
function maybeFrom(_type,value){if(value=="from"){cx.marked="keyword";return cont(expression);}}
function arrayLiteral(type){if(type=="]")return cont();return pass(expressionNoComma,maybeArrayComprehension);}
function maybeArrayComprehension(type){if(type=="for")return pass(comprehension,expect("]"));if(type==",")return cont(commasep(expressionNoComma,"]"));return pass(commasep(expressionNoComma,"]"));}
function comprehension(type){if(type=="for")return cont(forspec,comprehension);if(type=="if")return cont(expression,comprehension);}
return{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",false),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0};if(parserConfig.globalVars)state.globalVars=parserConfig.globalVars;return state;},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=false;state.indented=stream.indentation();findFatArrow(stream,state);}
if(state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.lastType=type=="operator"&&(content=="++"||content=="--")?"incdec":type;return parseJS(state,style,type,content,stream);},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;for(var i=state.cc.length-1;i>=0;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break;}
if(lexical.type=="stat"&&firstChar=="}")lexical=lexical.prev;if(statementIndent&&lexical.type==")"&&lexical.prev.type=="stat")
lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+(state.lastType=="operator"||state.lastType==","?lexical.info+1:0);else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="form")return lexical.indented+indentUnit;else if(type=="stat")
return lexical.indented+(state.lastType=="operator"||state.lastType==","?statementIndent||indentUnit:0);else if(lexical.info=="switch"&&!closing&&parserConfig.doubleIndentSwitch!=false)
return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit);},electricChars:":{}",blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",helperType:jsonMode?"json":"javascript",jsonMode:jsonMode};});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:true});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true});CodeMirror.defineMode("css",function(config,parserConfig){"use strict";if(!parserConfig.propertyKeywords)parserConfig=CodeMirror.resolveMode("text/css");var indentUnit=config.indentUnit,tokenHooks=parserConfig.tokenHooks,mediaTypes=parserConfig.mediaTypes||{},mediaFeatures=parserConfig.mediaFeatures||{},propertyKeywords=parserConfig.propertyKeywords||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},fontProperties=parserConfig.fontProperties||{},allowNested=parserConfig.allowNested;var type,override;function ret(style,tp){type=tp;return style;}
function tokenBase(stream,state){var ch=stream.next();if(tokenHooks[ch]){var result=tokenHooks[ch](stream,state);if(result!==false)return result;}
if(ch=="@"){stream.eatWhile(/[\w\\\-]/);return ret("def",stream.current());}else if(ch=="="||(ch=="~"||ch=="|")&&stream.eat("=")){return ret(null,"compare");}else if(ch=="\""||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state);}else if(ch=="#"){stream.eatWhile(/[\w\\\-]/);return ret("atom","hash");}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important");}else if(/\d/.test(ch)||ch=="."&&stream.eat(/\d/)){stream.eatWhile(/[\w.%]/);return ret("number","unit");}else if(ch==="-"){if(/[\d.]/.test(stream.peek())){stream.eatWhile(/[\w.%]/);return ret("number","unit");}else if(stream.match(/^[^-]+-/)){return ret("meta","meta");}}else if(/[,+>*\/]/.test(ch)){return ret(null,"select-op");}else if(ch=="."&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)){return ret("qualifier","qualifier");}else if(/[:;{}\[\]\(\)]/.test(ch)){return ret(null,ch);}else if(ch=="u"&&stream.match("rl(")){stream.backUp(1);state.tokenize=tokenParenthesized;return ret("property","word");}else if(/[\w\\\-]/.test(ch)){stream.eatWhile(/[\w\\\-]/);return ret("property","word");}else{return ret(null,null);}}
function tokenString(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){if(quote==")")stream.backUp(1);break;}
escaped=!escaped&&ch=="\\";}
if(ch==quote||!escaped&&quote!=")")state.tokenize=null;return ret("string","string");};}
function tokenParenthesized(stream,state){stream.next();if(!stream.match(/\s*[\"\']/,false))
state.tokenize=tokenString(")");else
state.tokenize=null;return ret(null,"(");}
function Context(type,indent,prev){this.type=type;this.indent=indent;this.prev=prev;}
function pushContext(state,stream,type){state.context=new Context(type,stream.indentation()+indentUnit,state.context);return type;}
function popContext(state){state.context=state.context.prev;return state.context.type;}
function pass(type,stream,state){return states[state.context.type](type,stream,state);}
function popAndPass(type,stream,state,n){for(var i=n||1;i>0;i--)
state.context=state.context.prev;return pass(type,stream,state);}
function wordAsValue(stream){var word=stream.current().toLowerCase();if(valueKeywords.hasOwnProperty(word))
override="atom";else if(colorKeywords.hasOwnProperty(word))
override="keyword";else
override="variable";}
var states={};states.top=function(type,stream,state){if(type=="{"){return pushContext(state,stream,"block");}else if(type=="}"&&state.context.prev){return popContext(state);}else if(type=="@media"){return pushContext(state,stream,"media");}else if(type=="@font-face"){return"font_face_before";}else if(type&&type.charAt(0)=="@"){return pushContext(state,stream,"at");}else if(type=="hash"){override="builtin";}else if(type=="word"){override="tag";}else if(type=="variable-definition"){return"maybeprop";}else if(type=="interpolation"){return pushContext(state,stream,"interpolation");}else if(type==":"){return"pseudo";}else if(allowNested&&type=="("){return pushContext(state,stream,"params");}
return state.context.type;};states.block=function(type,stream,state){if(type=="word"){if(propertyKeywords.hasOwnProperty(stream.current().toLowerCase())){override="property";return"maybeprop";}else if(allowNested){override=stream.match(/^\s*:/,false)?"property":"tag";return"block";}else{override+=" error";return"maybeprop";}}else if(type=="meta"){return"block";}else if(!allowNested&&(type=="hash"||type=="qualifier")){override="error";return"block";}else{return states.top(type,stream,state);}};states.maybeprop=function(type,stream,state){if(type==":")return pushContext(state,stream,"prop");return pass(type,stream,state);};states.prop=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"&&allowNested)return pushContext(state,stream,"propBlock");if(type=="}"||type=="{")return popAndPass(type,stream,state);if(type=="(")return pushContext(state,stream,"parens");if(type=="hash"&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(stream.current())){override+=" error";}else if(type=="word"){wordAsValue(stream);}else if(type=="interpolation"){return pushContext(state,stream,"interpolation");}
return"prop";};states.propBlock=function(type,_stream,state){if(type=="}")return popContext(state);if(type=="word"){override="property";return"maybeprop";}
return state.context.type;};states.parens=function(type,stream,state){if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type==")")return popContext(state);return"parens";};states.pseudo=function(type,stream,state){if(type=="word"){override="variable-3";return state.context.type;}
return pass(type,stream,state);};states.media=function(type,stream,state){if(type=="(")return pushContext(state,stream,"media_parens");if(type=="}")return popAndPass(type,stream,state);if(type=="{")return popContext(state)&&pushContext(state,stream,allowNested?"block":"top");if(type=="word"){var word=stream.current().toLowerCase();if(word=="only"||word=="not"||word=="and")
override="keyword";else if(mediaTypes.hasOwnProperty(word))
override="attribute";else if(mediaFeatures.hasOwnProperty(word))
override="property";else
override="error";}
return state.context.type;};states.media_parens=function(type,stream,state){if(type==")")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state,2);return states.media(type,stream,state);};states.font_face_before=function(type,stream,state){if(type=="{")
return pushContext(state,stream,"font_face");return pass(type,stream,state);};states.font_face=function(type,stream,state){if(type=="}")return popContext(state);if(type=="word"){if(!fontProperties.hasOwnProperty(stream.current().toLowerCase()))
override="error";else
override="property";return"maybeprop";}
return"font_face";};states.at=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type=="word")override="tag";else if(type=="hash")override="builtin";return"at";};states.interpolation=function(type,stream,state){if(type=="}")return popContext(state);if(type=="{"||type==";")return popAndPass(type,stream,state);if(type!="variable")override="error";return"interpolation";};states.params=function(type,stream,state){if(type==")")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type=="word")wordAsValue(stream);return"params";};return{startState:function(base){return{tokenize:null,state:"top",context:new Context("top",base||0,null)};},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style&&typeof style=="object"){type=style[1];style=style[0];}
override=style;state.state=states[state.state](type,stream,state);return override;},indent:function(state,textAfter){var cx=state.context,ch=textAfter&&textAfter.charAt(0);var indent=cx.indent;if(cx.prev&&(ch=="}"&&(cx.type=="block"||cx.type=="top"||cx.type=="interpolation"||cx.type=="font_face")||ch==")"&&(cx.type=="parens"||cx.type=="params"||cx.type=="media_parens")||ch=="{"&&(cx.type=="at"||cx.type=="media"))){indent=cx.indent-indentUnit;cx=cx.prev;}
return indent;},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"};});(function(){function keySet(array){var keys={};for(var i=0;i<array.length;++i){keys[array[i]]=true;}
return keys;}
var mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],mediaTypes=keySet(mediaTypes_);var mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],mediaFeatures=keySet(mediaFeatures_);var propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-inside","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","zoom","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"],propertyKeywords=keySet(propertyKeywords_);var colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],colorKeywords=keySet(colorKeywords_);var valueKeywords_=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],valueKeywords=keySet(valueKeywords_);var fontProperties_=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],fontProperties=keySet(fontProperties_);var allWords=mediaTypes_.concat(mediaFeatures_).concat(propertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);CodeMirror.registerHelper("hintWords","css",allWords);function tokenCComment(stream,state){var maybeEnd=false,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=null;break;}
maybeEnd=(ch=="*");}
return["comment","comment"];}
function tokenSGMLComment(stream,state){if(stream.skipTo("-->")){stream.match("-->");state.tokenize=null;}else{stream.skipToEnd();}
return["comment","comment"];}
CodeMirror.defineMIME("text/css",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,tokenHooks:{"<":function(stream,state){if(!stream.match("!--"))return false;state.tokenize=tokenSGMLComment;return tokenSGMLComment(stream,state);},"/":function(stream,state){if(!stream.eat("*"))return false;state.tokenize=tokenCComment;return tokenCComment(stream,state);}},name:"css"});CodeMirror.defineMIME("text/x-scss",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:true,tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"];}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state);}else{return["operator","operator"];}},":":function(stream){if(stream.match(/\s*{/))
return[null,"{"];return false;},"$":function(stream){stream.match(/^[\w-]+/);if(stream.match(/^\s*:/,false))
return["variable-2","variable-definition"];return["variable-2","variable"];},"#":function(stream){if(!stream.eat("{"))return false;return[null,"interpolation"];}},name:"css",helperType:"scss"});CodeMirror.defineMIME("text/x-less",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:true,tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"];}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state);}else{return["operator","operator"];}},"@":function(stream){if(stream.match(/^(charset|document|font-face|import|keyframes|media|namespace|page|supports)\b/,false))return false;stream.eatWhile(/[\w\\\-]/);if(stream.match(/^\s*:/,false))
return["variable-2","variable-definition"];return["variable-2","variable"];},"&":function(){return["atom","atom"];}},name:"css",helperType:"less"});})();CodeMirror.defineMode("clike",function(config,parserConfig){var indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,keywords=parserConfig.keywords||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings;var isOperatorChar=/[+\-*&%=<>!?|\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==false)return result;}
if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state);}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null;}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number";}
if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state);}
if(stream.eat("/")){stream.skipToEnd();return"comment";}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator";}
stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword";}
if(builtin.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"builtin";}
if(atoms.propertyIsEnumerable(cur))return"atom";return"variable";}
function tokenString(quote){return function(stream,state){var escaped=false,next,end=false;while((next=stream.next())!=null){if(next==quote&&!escaped){end=true;break;}
escaped=!escaped&&next=="\\";}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string";};}
function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break;}
maybeEnd=(ch=="*");}
return"comment";}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev;}
function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context);}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev;}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",false),indented:0,startOfLine:true};},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=false;state.indented=stream.indentation();state.startOfLine=true;}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=true;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}
else if(curPunc==ctx.type)popContext(state);else if(((ctx.type=="}"||ctx.type=="top")&&curPunc!=';')||(ctx.type=="statement"&&curPunc=="newstatement"))
pushContext(state,stream.column(),"statement");state.startOfLine=false;return style;},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:statementIndentUnit);else if(ctx.align&&(!dontAlignCalls||ctx.type!=")"))return ctx.column+(closing?0:1);else if(ctx.type==")"&&!closing)return ctx.indented+statementIndentUnit;else return ctx.indented+(closing?0:indentUnit);},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"};});(function(){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj;}
var cKeywords="auto if break int case long char register continue return default short do sizeof "+"double static else struct entry switch extern typedef float union for unsigned "+"goto while enum void const signed volatile";function cppHook(stream,state){if(!state.startOfLine)return false;for(;;){if(stream.skipTo("\\")){stream.next();if(stream.eol()){state.tokenize=cppHook;break;}}else{stream.skipToEnd();state.tokenize=null;break;}}
return"meta";}
function tokenAtString(stream,state){var next;while((next=stream.next())!=null){if(next=='"'&&!stream.eat('"')){state.tokenize=null;break;}}
return"string";}
function def(mimes,mode){var words=[];function add(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))
words.push(prop);}
add(mode.keywords);add(mode.builtin);add(mode.atoms);if(words.length){mode.helperType=mimes[0];CodeMirror.registerHelper("hintWords",mimes[0],words);}
for(var i=0;i<mimes.length;++i)
CodeMirror.defineMIME(mimes[i],mode);}
def(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(cKeywords),blockKeywords:words("case do else for if switch while struct"),atoms:words("null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});def(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(cKeywords+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),atoms:words("true false null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:words("abstract assert boolean break byte case catch char class const continue default "+"do double else enum extends final finally float for goto if implements import "+"instanceof int interface long native new package private protected public "+"return short static strictfp super switch synchronized this throw throws transient "+"try void volatile while"),blockKeywords:words("catch class do else finally for if switch try while"),atoms:words("true false null"),hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta";}},modeProps:{fold:["brace","import"]}});CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:words("abstract as base break case catch checked class const continue"+" default delegate do else enum event explicit extern finally fixed for"+" foreach goto if implicit in interface internal is lock namespace new"+" operator out override params private protected public readonly ref return sealed"+" sizeof stackalloc static struct switch this throw try typeof unchecked"+" unsafe using virtual void volatile while add alias ascending descending dynamic from get"+" global group into join let orderby partial remove select set value var yield"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),builtin:words("Boolean Byte Char DateTime DateTimeOffset Decimal Double"+" Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32"+" UInt64 bool byte char decimal double short int long object"+" sbyte float string ushort uint ulong"),atoms:words("true false null"),hooks:{"@":function(stream,state){if(stream.eat('"')){state.tokenize=tokenAtString;return tokenAtString(stream,state);}
stream.eatWhile(/[\w\$_]/);return"meta";}}});CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends false final finally for forSome if "+"implicit import lazy match new null object override package private protected return "+"sealed super this throw trait try trye type val var while with yield _ : = => <- <: "+"<% >: # @ "+"assert assume require print println printf readLine readBoolean readByte readShort "+"readChar readInt readLong readFloat readDouble "+"AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either "+"Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable "+"Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering "+"Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder "+"StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: "+"Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable "+"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process "+"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String "+"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:words("catch class do else finally for forSome if match switch try while"),atoms:words("true false null"),hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta";}}});def(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:words("float int bool void "+"vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 "+"mat2 mat3 mat4 "+"sampler1D sampler2D sampler3D samplerCube "+"sampler1DShadow sampler2DShadow"+"const attribute uniform varying "+"break continue discard return "+"for while do if else struct "+"in out inout"),blockKeywords:words("for while do if else struct"),builtin:words("radians degrees sin cos tan asin acos atan "+"pow exp log exp2 sqrt inversesqrt "+"abs sign floor ceil fract mod min max clamp mix step smootstep "+"length distance dot cross normalize ftransform faceforward "+"reflect refract matrixCompMult "+"lessThan lessThanEqual greaterThan greaterThanEqual "+"equal notEqual any all not "+"texture1D texture1DProj texture1DLod texture1DProjLod "+"texture2D texture2DProj texture2DLod texture2DProjLod "+"texture3D texture3DProj texture3DLod texture3DProjLod "+"textureCube textureCubeLod "+"shadow1D shadow2D shadow1DProj shadow2DProj "+"shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod "+"dFdx dFdy fwidth "+"noise1 noise2 noise3 noise4"),atoms:words("true false "+"gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex "+"gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 "+"gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 "+"gl_FogCoord "+"gl_Position gl_PointSize gl_ClipVertex "+"gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor "+"gl_TexCoord gl_FogFragCoord "+"gl_FragCoord gl_FrontFacing "+"gl_FragColor gl_FragData gl_FragDepth "+"gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix "+"gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse "+"gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse "+"gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose "+"gl_ProjectionMatrixInverseTranspose "+"gl_ModelViewProjectionMatrixInverseTranspose "+"gl_TextureMatrixInverseTranspose "+"gl_NormalScale gl_DepthRange gl_ClipPlane "+"gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel "+"gl_FrontLightModelProduct gl_BackLightModelProduct "+"gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ "+"gl_FogParameters "+"gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords "+"gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats "+"gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits "+"gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits "+"gl_MaxDrawBuffers"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});}());(function(){function keywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj;}
function heredoc(delim){return function(stream,state){if(stream.match(delim))state.tokenize=null;else stream.skipToEnd();return"string";};}
var phpConfig={name:"clike",keywords:keywords("abstract and array as break case catch class clone const continue declare default "+"do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final "+"for foreach function global goto if implements interface instanceof namespace "+"new or private protected public static switch throw trait try use var while xor "+"die echo empty exit eval include include_once isset list require require_once return "+"print unset __halt_compiler self static parent yield insteadof finally"),blockKeywords:keywords("catch do else elseif for foreach if switch try while finally"),atoms:keywords("true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__"),builtin:keywords("func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once"),multiLineStrings:true,hooks:{"$":function(stream){stream.eatWhile(/[\w\$_]/);return"variable-2";},"<":function(stream,state){if(stream.match(/<</)){stream.eatWhile(/[\w\.]/);state.tokenize=heredoc(stream.current().slice(3));return state.tokenize(stream,state);}
return false;},"#":function(stream){while(!stream.eol()&&!stream.match("?>",false))stream.next();return"comment";},"/":function(stream){if(stream.eat("/")){while(!stream.eol()&&!stream.match("?>",false))stream.next();return"comment";}
return false;}}};CodeMirror.defineMode("php",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,"text/html");var phpMode=CodeMirror.getMode(config,phpConfig);function dispatch(stream,state){var isPHP=state.curMode==phpMode;if(stream.sol()&&state.pending&&state.pending!='"'&&state.pending!="'")state.pending=null;if(!isPHP){if(stream.match(/^<\?\w*/)){state.curMode=phpMode;state.curState=state.php;return"meta";}
if(state.pending=='"'||state.pending=="'"){while(!stream.eol()&&stream.next()!=state.pending){}
var style="string";}else if(state.pending&&stream.pos<state.pending.end){stream.pos=state.pending.end;var style=state.pending.style;}else{var style=htmlMode.token(stream,state.curState);}
if(state.pending)state.pending=null;var cur=stream.current(),openPHP=cur.search(/<\?/),m;if(openPHP!=-1){if(style=="string"&&(m=cur.match(/[\'\"]$/))&&!/\?>/.test(cur))state.pending=m[0];else state.pending={end:stream.pos,style:style};stream.backUp(cur.length-openPHP);}
return style;}else if(isPHP&&state.php.tokenize==null&&stream.match("?>")){state.curMode=htmlMode;state.curState=state.html;return"meta";}else{return phpMode.token(stream,state.curState);}}
return{startState:function(){var html=CodeMirror.startState(htmlMode),php=CodeMirror.startState(phpMode);return{html:html,php:php,curMode:parserConfig.startOpen?phpMode:htmlMode,curState:parserConfig.startOpen?php:html,pending:null};},copyState:function(state){var html=state.html,htmlNew=CodeMirror.copyState(htmlMode,html),php=state.php,phpNew=CodeMirror.copyState(phpMode,php),cur;if(state.curMode==htmlMode)cur=htmlNew;else cur=phpNew;return{html:htmlNew,php:phpNew,curMode:state.curMode,curState:cur,pending:state.pending};},token:dispatch,indent:function(state,textAfter){if((state.curMode!=phpMode&&/^\s*<\//.test(textAfter))||(state.curMode==phpMode&&/^\?>/.test(textAfter)))
return htmlMode.indent(state.html,textAfter);return state.curMode.indent(state.curState,textAfter);},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(state){return{state:state.curState,mode:state.curMode};}};},"htmlmixed","clike");CodeMirror.defineMIME("application/x-httpd-php","php");CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:true});CodeMirror.defineMIME("text/x-php",phpConfig);})();(function(){function dialogDiv(cm,template,bottom){var wrap=cm.getWrapperElement();var dialog;dialog=wrap.appendChild(document.createElement("div"));if(bottom){dialog.className="CodeMirror-dialog CodeMirror-dialog-bottom";}else{dialog.className="CodeMirror-dialog CodeMirror-dialog-top";}
if(typeof template=="string"){dialog.innerHTML=template;}else{dialog.appendChild(template);}
return dialog;}
function closeNotification(cm,newVal){if(cm.state.currentNotificationClose)
cm.state.currentNotificationClose();cm.state.currentNotificationClose=newVal;}
CodeMirror.defineExtension("openDialog",function(template,callback,options){closeNotification(this,null);var dialog=dialogDiv(this,template,options&&options.bottom);var closed=false,me=this;function close(){if(closed)return;closed=true;dialog.parentNode.removeChild(dialog);}
var inp=dialog.getElementsByTagName("input")[0],button;if(inp){if(options&&options.value)inp.value=options.value;CodeMirror.on(inp,"keydown",function(e){if(options&&options.onKeyDown&&options.onKeyDown(e,inp.value,close)){return;}
if(e.keyCode==13||e.keyCode==27){CodeMirror.e_stop(e);close();me.focus();if(e.keyCode==13)callback(inp.value);}});if(options&&options.onKeyUp){CodeMirror.on(inp,"keyup",function(e){options.onKeyUp(e,inp.value,close);});}
if(options&&options.value)inp.value=options.value;inp.focus();CodeMirror.on(inp,"blur",close);}else if(button=dialog.getElementsByTagName("button")[0]){CodeMirror.on(button,"click",function(){close();me.focus();});button.focus();CodeMirror.on(button,"blur",close);}
return close;});CodeMirror.defineExtension("openConfirm",function(template,callbacks,options){closeNotification(this,null);var dialog=dialogDiv(this,template,options&&options.bottom);var buttons=dialog.getElementsByTagName("button");var closed=false,me=this,blurring=1;function close(){if(closed)return;closed=true;dialog.parentNode.removeChild(dialog);me.focus();}
buttons[0].focus();for(var i=0;i<buttons.length;++i){var b=buttons[i];(function(callback){CodeMirror.on(b,"click",function(e){CodeMirror.e_preventDefault(e);close();if(callback)callback(me);});})(callbacks[i]);CodeMirror.on(b,"blur",function(){--blurring;setTimeout(function(){if(blurring<=0)close();},200);});CodeMirror.on(b,"focus",function(){++blurring;});}});CodeMirror.defineExtension("openNotification",function(template,options){closeNotification(this,close);var dialog=dialogDiv(this,template,options&&options.bottom);var duration=options&&(options.duration===undefined?5000:options.duration);var closed=false,doneTimer;function close(){if(closed)return;closed=true;clearTimeout(doneTimer);dialog.parentNode.removeChild(dialog);}
CodeMirror.on(dialog,'click',function(e){CodeMirror.e_preventDefault(e);close();});if(duration)
doneTimer=setTimeout(close,options.duration);});})();(function(){var ie_lt8=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var Pos=CodeMirror.Pos;var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function findMatchingBracket(cm,where,strict){var state=cm.state.matchBrackets;var maxScanLen=(state&&state.maxScanLineLength)||10000;var maxScanLines=(state&&state.maxScanLines)||100;var cur=where||cm.getCursor(),line=cm.getLineHandle(cur.line),pos=cur.ch-1;var match=(pos>=0&&matching[line.text.charAt(pos)])||matching[line.text.charAt(++pos)];if(!match)return null;var forward=match.charAt(1)==">",d=forward?1:-1;if(strict&&forward!=(pos==cur.ch))return null;var style=cm.getTokenTypeAt(Pos(cur.line,pos+1));var stack=[line.text.charAt(pos)],re=/[(){}[\]]/;function scan(line,lineNo,start){if(!line.text)return;var pos=forward?0:line.text.length-1,end=forward?line.text.length:-1;if(line.text.length>maxScanLen)return null;if(start!=null)pos=start+d;for(;pos!=end;pos+=d){var ch=line.text.charAt(pos);if(re.test(ch)&&cm.getTokenTypeAt(Pos(lineNo,pos+1))==style){var match=matching[ch];if(match.charAt(1)==">"==forward)stack.push(ch);else if(stack.pop()!=match.charAt(0))return{pos:pos,match:false};else if(!stack.length)return{pos:pos,match:true};}}}
for(var i=cur.line,found,e=forward?Math.min(i+maxScanLines,cm.lineCount()):Math.max(-1,i-maxScanLines);i!=e;i+=d){if(i==cur.line)found=scan(line,i,pos);else found=scan(cm.getLineHandle(i),i);if(found)break;}
return{from:Pos(cur.line,pos),to:found&&Pos(i,found.pos),match:found&&found.match,forward:forward};}
function matchBrackets(cm,autoclear){var maxHighlightLen=cm.state.matchBrackets.maxHighlightLineLength||1000;var found=findMatchingBracket(cm);if(!found||cm.getLine(found.from.line).length>maxHighlightLen||found.to&&cm.getLine(found.to.line).length>maxHighlightLen)
return;var style=found.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var one=cm.markText(found.from,Pos(found.from.line,found.from.ch+1),{className:style});var two=found.to&&cm.markText(found.to,Pos(found.to.line,found.to.ch+1),{className:style});if(ie_lt8&&cm.state.focused)cm.display.input.focus();var clear=function(){cm.operation(function(){one.clear();two&&two.clear();});};if(autoclear)setTimeout(clear,800);else return clear;}
var currentlyHighlighted=null;function doMatchBrackets(cm){cm.operation(function(){if(currentlyHighlighted){currentlyHighlighted();currentlyHighlighted=null;}
if(!cm.somethingSelected())currentlyHighlighted=matchBrackets(cm,false);});}
CodeMirror.defineOption("matchBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init)
cm.off("cursorActivity",doMatchBrackets);if(val){cm.state.matchBrackets=typeof val=="object"?val:{};cm.on("cursorActivity",doMatchBrackets);}});CodeMirror.defineExtension("matchBrackets",function(){matchBrackets(this,true);});CodeMirror.defineExtension("findMatchingBracket",function(pos,strict){return findMatchingBracket(this,pos,strict);});})();(function(){function searchOverlay(query,caseInsensitive){var startChar;if(typeof query=="string"){startChar=query.charAt(0);query=new RegExp("^"+query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),caseInsensitive?"i":"");}else{query=new RegExp("^(?:"+query.source+")",query.ignoreCase?"i":"");}
if(typeof query=="string")return{token:function(stream){if(stream.match(query))return"searching";stream.next();stream.skipTo(query.charAt(0))||stream.skipToEnd();}};return{token:function(stream){if(stream.match(query))return"searching";while(!stream.eol()){stream.next();if(startChar)
stream.skipTo(startChar)||stream.skipToEnd();if(stream.match(query,false))break;}}};}
function SearchState(){this.posFrom=this.posTo=this.query=null;this.overlay=null;}
function getSearchState(cm){return cm.state.search||(cm.state.search=new SearchState());}
function queryCaseInsensitive(query){return typeof query=="string"&&query==query.toLowerCase();}
function getSearchCursor(cm,query,pos){return cm.getSearchCursor(query,pos,queryCaseInsensitive(query));}
function dialog(cm,text,shortText,deflt,f){if(cm.openDialog)cm.openDialog(text,f,{value:deflt});else f(prompt(shortText,deflt));}
function confirmDialog(cm,text,shortText,fs){if(cm.openConfirm)cm.openConfirm(text,fs);else if(confirm(shortText))fs[0]();}
function parseQuery(query){var isRE=query.match(/^\/(.*)\/([a-z]*)$/);return isRE?new RegExp(isRE[1],isRE[2].indexOf("i")==-1?"":"i"):query;}
var queryDialog='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';function doSearch(cm,rev){var state=getSearchState(cm);if(state.query)return findNext(cm,rev);dialog(cm,queryDialog,"Search for:",cm.getSelection(),function(query){cm.operation(function(){if(!query||state.query)return;state.query=parseQuery(query);cm.removeOverlay(state.overlay,queryCaseInsensitive(state.query));state.overlay=searchOverlay(state.query);cm.addOverlay(state.overlay);state.posFrom=state.posTo=cm.getCursor();findNext(cm,rev);});});}
function findNext(cm,rev){cm.operation(function(){var state=getSearchState(cm);var cursor=getSearchCursor(cm,state.query,rev?state.posFrom:state.posTo);if(!cursor.find(rev)){cursor=getSearchCursor(cm,state.query,rev?CodeMirror.Pos(cm.lastLine()):CodeMirror.Pos(cm.firstLine(),0));if(!cursor.find(rev))return;}
cm.setSelection(cursor.from(),cursor.to());cm.scrollIntoView({from:cursor.from(),to:cursor.to()});state.posFrom=cursor.from();state.posTo=cursor.to();});}
function clearSearch(cm){cm.operation(function(){var state=getSearchState(cm);if(!state.query)return;state.query=null;cm.removeOverlay(state.overlay);});}
var replaceQueryDialog='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';var replacementQueryDialog='With: <input type="text" style="width: 10em"/>';var doReplaceConfirm="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function replace(cm,all){dialog(cm,replaceQueryDialog,"Replace:",cm.getSelection(),function(query){if(!query)return;query=parseQuery(query);dialog(cm,replacementQueryDialog,"Replace with:","",function(text){if(all){cm.operation(function(){for(var cursor=getSearchCursor(cm,query);cursor.findNext();){if(typeof query!="string"){var match=cm.getRange(cursor.from(),cursor.to()).match(query);cursor.replace(text.replace(/\$(\d)/,function(_,i){return match[i];}));}else cursor.replace(text);}});}else{clearSearch(cm);var cursor=getSearchCursor(cm,query,cm.getCursor());var advance=function(){var start=cursor.from(),match;if(!(match=cursor.findNext())){cursor=getSearchCursor(cm,query);if(!(match=cursor.findNext())||(start&&cursor.from().line==start.line&&cursor.from().ch==start.ch))return;}
cm.setSelection(cursor.from(),cursor.to());cm.scrollIntoView({from:cursor.from(),to:cursor.to()});confirmDialog(cm,doReplaceConfirm,"Replace?",[function(){doReplace(match);},advance]);};var doReplace=function(match){cursor.replace(typeof query=="string"?text:text.replace(/\$(\d)/,function(_,i){return match[i];}));advance();};advance();}});});}
CodeMirror.commands.find=function(cm){clearSearch(cm);doSearch(cm);};CodeMirror.commands.findNext=doSearch;CodeMirror.commands.findPrev=function(cm){doSearch(cm,true);};CodeMirror.commands.clearSearch=clearSearch;CodeMirror.commands.replace=replace;CodeMirror.commands.replaceAll=function(cm){replace(cm,true);};})();(function(){var Pos=CodeMirror.Pos;function SearchCursor(doc,query,pos,caseFold){this.atOccurrence=false;this.doc=doc;if(caseFold==null&&typeof query=="string")caseFold=false;pos=pos?doc.clipPos(pos):Pos(0,0);this.pos={from:pos,to:pos};if(typeof query!="string"){if(!query.global)query=new RegExp(query.source,query.ignoreCase?"ig":"g");this.matches=function(reverse,pos){if(reverse){query.lastIndex=0;var line=doc.getLine(pos.line).slice(0,pos.ch),cutOff=0,match,start;for(;;){query.lastIndex=cutOff;var newMatch=query.exec(line);if(!newMatch)break;match=newMatch;start=match.index;cutOff=match.index+(match[0].length||1);if(cutOff==line.length)break;}
var matchLen=(match&&match[0].length)||0;if(!matchLen){if(start==0&&line.length==0){match=undefined;}
else if(start!=doc.getLine(pos.line).length){matchLen++;}}}else{query.lastIndex=pos.ch;var line=doc.getLine(pos.line),match=query.exec(line);var matchLen=(match&&match[0].length)||0;var start=match&&match.index;if(start+matchLen!=line.length&&!matchLen)matchLen=1;}
if(match&&matchLen)
return{from:Pos(pos.line,start),to:Pos(pos.line,start+matchLen),match:match};};}else{var origQuery=query;if(caseFold)query=query.toLowerCase();var fold=caseFold?function(str){return str.toLowerCase();}:function(str){return str;};var target=query.split("\n");if(target.length==1){if(!query.length){this.matches=function(){};}else{this.matches=function(reverse,pos){if(reverse){var orig=doc.getLine(pos.line).slice(0,pos.ch),line=fold(orig);var match=line.lastIndexOf(query);if(match>-1){match=adjustPos(orig,line,match);return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)};}}else{var orig=doc.getLine(pos.line).slice(pos.ch),line=fold(orig);var match=line.indexOf(query);if(match>-1){match=adjustPos(orig,line,match)+pos.ch;return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)};}}};}}else{var origTarget=origQuery.split("\n");this.matches=function(reverse,pos){var last=target.length-1;if(reverse){if(pos.line-(target.length-1)<doc.firstLine())return;if(fold(doc.getLine(pos.line).slice(0,origTarget[last].length))!=target[target.length-1])return;var to=Pos(pos.line,origTarget[last].length);for(var ln=pos.line-1,i=last-1;i>=1;--i,--ln)
if(target[i]!=fold(doc.getLine(ln)))return;var line=doc.getLine(ln),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0])return;return{from:Pos(ln,cut),to:to};}else{if(pos.line+(target.length-1)>doc.lastLine())return;var line=doc.getLine(pos.line),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0])return;var from=Pos(pos.line,cut);for(var ln=pos.line+1,i=1;i<last;++i,++ln)
if(target[i]!=fold(doc.getLine(ln)))return;if(doc.getLine(ln).slice(0,origTarget[last].length)!=target[last])return;return{from:from,to:Pos(ln,origTarget[last].length)};}};}}}
SearchCursor.prototype={findNext:function(){return this.find(false);},findPrevious:function(){return this.find(true);},find:function(reverse){var self=this,pos=this.doc.clipPos(reverse?this.pos.from:this.pos.to);function savePosAndFail(line){var pos=Pos(line,0);self.pos={from:pos,to:pos};self.atOccurrence=false;return false;}
for(;;){if(this.pos=this.matches(reverse,pos)){this.atOccurrence=true;return this.pos.match||true;}
if(reverse){if(!pos.line)return savePosAndFail(0);pos=Pos(pos.line-1,this.doc.getLine(pos.line-1).length);}
else{var maxLine=this.doc.lineCount();if(pos.line==maxLine-1)return savePosAndFail(maxLine);pos=Pos(pos.line+1,0);}}},from:function(){if(this.atOccurrence)return this.pos.from;},to:function(){if(this.atOccurrence)return this.pos.to;},replace:function(newText){if(!this.atOccurrence)return;var lines=CodeMirror.splitLines(newText);this.doc.replaceRange(lines,this.pos.from,this.pos.to);this.pos.to=Pos(this.pos.from.line+lines.length-1,lines[lines.length-1].length+(lines.length==1?this.pos.from.ch:0));}};function adjustPos(orig,folded,pos){if(orig.length==folded.length)return pos;for(var pos1=Math.min(pos,orig.length);;){var len1=orig.slice(0,pos1).toLowerCase().length;if(len1<pos)++pos1;else if(len1>pos)--pos1;else return pos1;}}
CodeMirror.defineExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this.doc,query,pos,caseFold);});CodeMirror.defineDocExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this,query,pos,caseFold);});})();(function(){var DEFAULT_MIN_CHARS=2;var DEFAULT_TOKEN_STYLE="matchhighlight";var DEFAULT_DELAY=100;function State(options){if(typeof options=="object"){this.minChars=options.minChars;this.style=options.style;this.showToken=options.showToken;this.delay=options.delay;}
if(this.style==null)this.style=DEFAULT_TOKEN_STYLE;if(this.minChars==null)this.minChars=DEFAULT_MIN_CHARS;if(this.delay==null)this.delay=DEFAULT_DELAY;this.overlay=this.timeout=null;}
CodeMirror.defineOption("highlightSelectionMatches",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){var over=cm.state.matchHighlighter.overlay;if(over)cm.removeOverlay(over);clearTimeout(cm.state.matchHighlighter.timeout);cm.state.matchHighlighter=null;cm.off("cursorActivity",cursorActivity);}
if(val){cm.state.matchHighlighter=new State(val);highlightMatches(cm);cm.on("cursorActivity",cursorActivity);}});function cursorActivity(cm){var state=cm.state.matchHighlighter;clearTimeout(state.timeout);state.timeout=setTimeout(function(){highlightMatches(cm);},state.delay);}
function highlightMatches(cm){cm.operation(function(){var state=cm.state.matchHighlighter;if(state.overlay){cm.removeOverlay(state.overlay);state.overlay=null;}
if(!cm.somethingSelected()&&state.showToken){var re=state.showToken===true?/[\w$]/:state.showToken;var cur=cm.getCursor(),line=cm.getLine(cur.line),start=cur.ch,end=start;while(start&&re.test(line.charAt(start-1)))--start;while(end<line.length&&re.test(line.charAt(end)))++end;if(start<end)
cm.addOverlay(state.overlay=makeOverlay(line.slice(start,end),re,state.style));return;}
if(cm.getCursor("head").line!=cm.getCursor("anchor").line)return;var selection=cm.getSelection().replace(/^\s+|\s+$/g,"");if(selection.length>=state.minChars)
cm.addOverlay(state.overlay=makeOverlay(selection,false,state.style));});}
function boundariesAround(stream,re){return(!stream.start||!re.test(stream.string.charAt(stream.start-1)))&&(stream.pos==stream.string.length||!re.test(stream.string.charAt(stream.pos)));}
function makeOverlay(query,hasBoundary,style){return{token:function(stream){if(stream.match(query)&&(!hasBoundary||boundariesAround(stream,hasBoundary)))
return style;stream.next();stream.skipTo(query.charAt(0))||stream.skipToEnd();}};}})();(function(){"use strict";var WRAP_CLASS="CodeMirror-activeline";var BACK_CLASS="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",false,function(cm,val,old){var prev=old&&old!=CodeMirror.Init;if(val&&!prev){updateActiveLine(cm,cm.getCursor().line);cm.on("beforeSelectionChange",selectionChange);}else if(!val&&prev){cm.off("beforeSelectionChange",selectionChange);clearActiveLine(cm);delete cm.state.activeLine;}});function clearActiveLine(cm){if("activeLine"in cm.state){cm.removeLineClass(cm.state.activeLine,"wrap",WRAP_CLASS);cm.removeLineClass(cm.state.activeLine,"background",BACK_CLASS);}}
function updateActiveLine(cm,selectedLine){var line=cm.getLineHandleVisualStart(selectedLine);if(cm.state.activeLine==line)return;cm.operation(function(){clearActiveLine(cm);cm.addLineClass(line,"wrap",WRAP_CLASS);cm.addLineClass(line,"background",BACK_CLASS);cm.state.activeLine=line;});}
function selectionChange(cm,sel){updateActiveLine(cm,sel.head.line);}})();